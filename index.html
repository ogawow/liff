<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>週間健康カレンダー</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f0f0;
        }
        .calendar-container {
            max-width: 100%;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 15px;
        }
        .week-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .week-dates {
            font-weight: bold;
        }
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
        }
        .day-button {
            background-color: #ffffff;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
        }
        .day-button:hover {
            background-color: #f0f0f0;
        }
        .weekday {
            font-size: 0.8em;
            color: #666;
        }
        .date {
            font-size: 1.2em;
            font-weight: bold;
            margin: 5px 0;
        }
        button {
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 10px 15px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="calendar-container">
        <div class="week-navigation">
            <button onclick="changeWeek(-1)">&lt; 前週</button>
            <span class="week-dates" id="weekDates"></span>
            <button onclick="changeWeek(1)">次週 &gt;</button>
        </div>
        <div class="calendar-grid" id="calendarGrid"></div>
    </div>

    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script>
        let currentDate = new Date();

        function initializeLiff() {
            const liffId = "1661032313-WdPDq4PV"; // ここにLIFF IDを設定してください
            liff.init({ liffId: liffId })
                .then(() => {
                    console.log("LIFF initialized successfully");
                    updateCalendar();
                })
                .catch((error) => {
                    console.error("LIFF initialization failed", error);
                });
        }

        function formatDate(date) {
            return date.toISOString().split('T')[0];
        }

        function getWeekDates(date) {
            const week = [];
            for (let i = 0; i < 7; i++) {
                const day = new Date(date);
                day.setDate(date.getDate() - date.getDay() + i);
                week.push(formatDate(day));
            }
            return week;
        }

        function updateCalendar() {
            const weekDates = getWeekDates(currentDate);
            document.getElementById('weekDates').textContent = `${weekDates[0]} - ${weekDates[6]}`;

            const calendarGrid = document.getElementById('calendarGrid');
            calendarGrid.innerHTML = '';

            weekDates.forEach(date => {
                const dayDate = new Date(date);
                const dayButton = document.createElement('div');
                dayButton.className = 'day-button';
                dayButton.onclick = () => sendFlexMessage(date);

                const weekday = document.createElement('div');
                weekday.className = 'weekday';
                weekday.textContent = dayDate.toLocaleDateString('ja-JP', { weekday: 'short' });

                const dateElement = document.createElement('div');
                dateElement.className = 'date';
                dateElement.textContent = dayDate.getDate();

                dayButton.appendChild(weekday);
                dayButton.appendChild(dateElement);
                calendarGrid.appendChild(dayButton);
            });
        }

        function changeWeek(direction) {
            currentDate.setDate(currentDate.getDate() + direction * 7);
            updateCalendar();
        }

        function sendFlexMessage(date) {
            if (!liff.isInClient()) {
                alert('This button is only available in the LINE app');
                return;
            }

            const flexMessage = {
                type: "flex",
                altText: "健康記録 " + date,
                contents: {
  "type": "carousel",
  "contents": [
    {
      "type": "bubble",
      "size": "giga",
      "header": {
        "type": "box",
        "layout": "vertical",
        "contents": [
          {
            "type": "text",
            "text": weekday,
            "weight": "bold",
            "size": "xl",
            "color": "#FFFFFF"
          }
        ],
        "backgroundColor": "#27ACB2",
        "paddingAll": "20px"
      },
      "body": {
        "type": "box",
        "layout": "vertical",
        "contents": [
          {
            "type": "box",
            "layout": "vertical",
            "contents": [
              {
                "type": "text",
                "text": "体重",
                "weight": "bold",
                "size": "md"
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "text",
                        "text": "現在",
                        "size": "sm",
                        "color": "#555555"
                      },
                      {
                        "type": "text",
                        "text": "65 kg",
                        "size": "xl",
                        "color": "#111111",
                        "weight": "bold"
                      },
                      {
                        "type": "text",
                        "text": "先週比: -1.5kg",
                        "size": "xs",
                        "color": "#27ACB2"
                      }
                    ],
                    "flex": 1
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "text",
                        "text": "目標",
                        "size": "sm",
                        "color": "#555555"
                      },
                      {
                        "type": "text",
                        "text": "62 kg",
                        "size": "xl",
                        "color": "#111111",
                        "weight": "bold"
                      },
                      {
                        "type": "text",
                        "text": "残り: 3kg",
                        "size": "xs",
                        "color": "#888888"
                      }
                    ],
                    "flex": 1
                  }
                ]
              }
            ]
          },
          {
            "type": "text",
            "text": "体重グラフ (1週間)",
            "weight": "bold",
            "size": "md",
            "margin": "lg"
          },
          {
            "type": "box",
            "layout": "vertical",
            "margin": "md",
            "contents": [
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "67kg",
                    "size": "xxs",
                    "color": "#888888",
                    "align": "start"
                  }
                ]
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "height": "40px",
                        "backgroundColor": "#27ACB2",
                        "width": "10px"
                      }
                    ],
                    "height": "40px",
                    "backgroundColor": "#EEEEEE",
                    "flex": 1,
                    "alignItems": "center",
                    "justifyContent": "flex-end"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "height": "38px",
                        "backgroundColor": "#27ACB2",
                        "width": "10px"
                      }
                    ],
                    "height": "40px",
                    "backgroundColor": "#EEEEEE",
                    "flex": 1,
                    "alignItems": "center",
                    "justifyContent": "flex-end"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "height": "36px",
                        "backgroundColor": "#27ACB2",
                        "width": "10px"
                      }
                    ],
                    "height": "40px",
                    "backgroundColor": "#EEEEEE",
                    "flex": 1,
                    "alignItems": "center",
                    "justifyContent": "flex-end"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "height": "34px",
                        "backgroundColor": "#27ACB2",
                        "width": "10px"
                      }
                    ],
                    "height": "40px",
                    "backgroundColor": "#EEEEEE",
                    "flex": 1,
                    "alignItems": "center",
                    "justifyContent": "flex-end"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "height": "32px",
                        "backgroundColor": "#27ACB2",
                        "width": "10px"
                      }
                    ],
                    "height": "40px",
                    "backgroundColor": "#EEEEEE",
                    "flex": 1,
                    "alignItems": "center",
                    "justifyContent": "flex-end"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "height": "30px",
                        "backgroundColor": "#27ACB2",
                        "width": "10px"
                      }
                    ],
                    "height": "40px",
                    "backgroundColor": "#EEEEEE",
                    "flex": 1,
                    "alignItems": "center",
                    "justifyContent": "flex-end"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "height": "28px",
                        "backgroundColor": "#27ACB2",
                        "width": "10px"
                      }
                    ],
                    "height": "40px",
                    "backgroundColor": "#EEEEEE",
                    "flex": 1,
                    "alignItems": "center",
                    "justifyContent": "flex-end"
                  }
                ]
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "65kg",
                    "size": "xxs",
                    "color": "#888888",
                    "align": "start"
                  }
                ]
              }
            ]
          },
          {
            "type": "box",
            "layout": "vertical",
            "contents": [
              {
                "type": "text",
                "text": "カロリー (1日平均)",
                "weight": "bold",
                "size": "md"
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "text",
                        "text": "摂取",
                        "size": "sm",
                        "color": "#555555"
                      },
                      {
                        "type": "text",
                        "text": "1350 kcal",
                        "size": "xl",
                        "color": "#111111",
                        "weight": "bold"
                      },
                      {
                        "type": "text",
                        "text": "目標: 1500 kcal",
                        "size": "xs",
                        "color": "#888888"
                      }
                    ],
                    "flex": 1
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "text",
                        "text": "消費",
                        "size": "sm",
                        "color": "#555555"
                      },
                      {
                        "type": "text",
                        "text": "480 kcal",
                        "size": "xl",
                        "color": "#111111",
                        "weight": "bold"
                      },
                      {
                        "type": "text",
                        "text": "目標: 500 kcal",
                        "size": "xs",
                        "color": "#888888"
                      }
                    ],
                    "flex": 1
                  }
                ]
              }
            ],
            "margin": "xl"
          },
          {
            "type": "text",
            "text": "PFCバランス (1日平均)",
            "weight": "bold",
            "size": "md",
            "margin": "lg"
          },
          {
            "type": "box",
            "layout": "horizontal",
            "margin": "md",
            "contents": [
              {
                "type": "box",
                "layout": "vertical",
                "contents": [
                  {
                    "type": "text",
                    "text": "P(たんぱく質)",
                    "size": "sm",
                    "color": "#555555"
                  },
                  {
                    "type": "text",
                    "text": "42.5g",
                    "size": "md",
                    "color": "#111111",
                    "weight": "bold"
                  },
                  {
                    "type": "text",
                    "text": "目標: 50.0g",
                    "size": "xs",
                    "color": "#888888"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "width": "85%",
                        "height": "6px",
                        "backgroundColor": "#FF6B6E"
                      }
                    ],
                    "backgroundColor": "#EEEEEE",
                    "height": "6px",
                    "margin": "sm"
                  }
                ],
                "flex": 1
              },
              {
                "type": "box",
                "layout": "vertical",
                "contents": [
                  {
                    "type": "text",
                    "text": "F(脂質)",
                    "size": "sm",
                    "color": "#555555"
                  },
                  {
                    "type": "text",
                    "text": "45.2g",
                    "size": "md",
                    "color": "#111111",
                    "weight": "bold"
                  },
                  {
                    "type": "text",
                    "text": "目標: 60.0g",
                    "size": "xs",
                    "color": "#888888"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "width": "75%",
                        "height": "6px",
                        "backgroundColor": "#FFB2C0"
                      }
                    ],
                    "backgroundColor": "#EEEEEE",
                    "height": "6px",
                    "margin": "sm"
                  }
                ],
                "flex": 1
              },
              {
                "type": "box",
                "layout": "vertical",
                "contents": [
                  {
                    "type": "text",
                    "text": "C(炭水化物)",
                    "size": "sm",
                    "color": "#555555"
                  },
                  {
                    "type": "text",
                    "text": "135.8g",
                    "size": "md",
                    "color": "#111111",
                    "weight": "bold"
                  },
                  {
                    "type": "text",
                    "text": "目標: 150.0g",
                    "size": "xs",
                    "color": "#888888"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "width": "90%",
                        "height": "6px",
                        "backgroundColor": "#A4D8D8"
                      }
                    ],
                    "backgroundColor": "#EEEEEE",
                    "height": "6px",
                    "margin": "sm"
                  }
                ],
                "flex": 1
              }
            ]
          },
          {
            "type": "separator",
            "margin": "xl"
          },
          {
            "type": "text",
            "text": "運動記録 (週合計)",
            "weight": "bold",
            "size": "md",
            "margin": "xl"
          },
          {
            "type": "box",
            "layout": "vertical",
            "margin": "md",
            "contents": [
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "ランニング",
                    "size": "sm",
                    "color": "#555555",
                    "flex": 2
                  },
                  {
                    "type": "text",
                    "text": "180分",
                    "size": "sm",
                    "color": "#111111",
                    "align": "end",
                    "flex": 1
                  },
                  {
                    "type": "text",
                    "text": "1800 kcal",
                    "size": "sm",
                    "color": "#27ACB2",
                    "align": "end",
                    "flex": 1
                  }
                ]
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "筋トレ",
                    "size": "sm",
                    "color": "#555555",
                    "flex": 2
                  },
                  {
                    "type": "text",
                    "text": "240分",
                    "size": "sm",
                    "color": "#111111",
                    "align": "end",
                    "flex": 1
                  },
                  {
                    "type": "text",
                    "text": "960 kcal",
                    "size": "sm",
                    "color": "#27ACB2",
                    "align": "end",
                    "flex": 1
                  }
                ]
              }
            ]
          },
          {
            "type": "separator",
            "margin": "xl"
          },
          {
            "type": "box",
            "layout": "vertical",
            "margin": "xl",
            "contents": [
              {
                "type": "text",
                "text": "週間達成状況",
                "weight": "bold",
                "size": "md"
              },
              {
                "type": "box",
                "layout": "vertical",
                "margin": "md",
                "contents": [
                  {
                    "type": "box",
                    "layout": "horizontal",
                    "contents": [
                      {
                        "type": "text",
                        "text": "カロリー目標達成日数",
                        "size": "sm",
                        "color": "#555555",
                        "flex": 3
                      },
                      {
                        "type": "text",
                        "text": "5 / 7日",
                        "size": "sm",
                        "color": "#111111",
                        "align": "end",
                        "flex": 1
                      }
                    ]
                  },
                  {
                    "type": "box",
                    "layout": "horizontal",
                    "contents": [
                      {
                        "type": "text",
                        "text": "運動目標達成日数",
                        "size": "sm",
                        "color": "#555555",
                        "flex": 3
                      },
                      {
                        "type": "text",
                        "text": "6 / 7日",
                        "size": "sm",
                        "color": "#111111",
                        "align": "end",
                        "flex": 1
                      }
                    ]
                  },
                  {
                    "type": "box",
                    "layout": "horizontal",
                    "contents": [
                      {
                        "type": "text",
                        "text": "PFCバランス目標達成日数",
                        "size": "sm",
                        "color": "#555555",
                        "flex": 3
                      },
                      {
                        "type": "text",
                        "text": "4 / 7日",
                        "size": "sm",
                        "color": "#111111",
                        "align": "end",
                        "flex": 1
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      "footer": {
        "type": "box",
        "layout": "vertical",
        "contents": [
          {
            "type": "button",
            "action": {
              "type": "message",
              "label": "詳細を見る",
              "text": "週間健康データの詳細を見る"
            },
            "style": "primary",
            "color": "#27ACB2"
          }
        ]
      },
      "styles": {
        "header": {
          "backgroundColor": "#27ACB2"
        }
      }
    },
    {
      "type": "bubble",
      "size": "giga",
      "header": {
        "type": "box",
        "layout": "vertical",
        "contents": [
          {
            "type": "text",
            "text": date,
            "weight": "bold",
            "size": "xl",
            "color": "#FFFFFF"
          }
        ],
        "backgroundColor": "#27ACB2",
        "paddingAll": "20px"
      },
      "body": {
        "type": "box",
        "layout": "vertical",
        "contents": [
          {
            "type": "box",
            "layout": "vertical",
            "margin": "xl",
            "contents": [
              {
                "type": "text",
                "text": "体重",
                "weight": "bold",
                "size": "md"
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "text",
                        "text": "現在",
                        "size": "sm",
                        "color": "#555555"
                      },
                      {
                        "type": "text",
                        "text": "66 kg",
                        "size": "xl",
                        "color": "#111111",
                        "weight": "bold"
                      },
                      {
                        "type": "text",
                        "text": "前日比: -1kg",
                        "size": "xs",
                        "color": "#27ACB2"
                      }
                    ],
                    "flex": 1
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "text",
                        "text": "目標",
                        "size": "sm",
                        "color": "#555555"
                      },
                      {
                        "type": "text",
                        "text": "62 kg",
                        "size": "xl",
                        "color": "#111111",
                        "weight": "bold"
                      },
                      {
                        "type": "text",
                        "text": "残り: 4kg",
                        "size": "xs",
                        "color": "#888888"
                      }
                    ],
                    "flex": 1
                  }
                ]
              }
            ]
          },
          {
            "type": "text",
            "text": "体重グラフ (過去7日間)",
            "weight": "bold",
            "size": "md",
            "margin": "lg"
          },
          {
            "type": "box",
            "layout": "vertical",
            "margin": "md",
            "contents": [
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "65kg",
                    "size": "xxs",
                    "color": "#888888",
                    "align": "start"
                  }
                ]
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "height": "35px",
                        "backgroundColor": "#27ACB2",
                        "width": "10px"
                      }
                    ],
                    "height": "40px",
                    "backgroundColor": "#EEEEEE",
                    "flex": 1,
                    "alignItems": "center",
                    "justifyContent": "flex-end"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "height": "30px",
                        "backgroundColor": "#27ACB2",
                        "width": "10px"
                      }
                    ],
                    "height": "40px",
                    "backgroundColor": "#EEEEEE",
                    "flex": 1,
                    "alignItems": "center",
                    "justifyContent": "flex-end"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "height": "32px",
                        "backgroundColor": "#27ACB2",
                        "width": "10px"
                      }
                    ],
                    "height": "40px",
                    "backgroundColor": "#EEEEEE",
                    "flex": 1,
                    "alignItems": "center",
                    "justifyContent": "flex-end"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "height": "28px",
                        "backgroundColor": "#27ACB2",
                        "width": "10px"
                      }
                    ],
                    "height": "40px",
                    "backgroundColor": "#EEEEEE",
                    "flex": 1,
                    "alignItems": "center",
                    "justifyContent": "flex-end"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "height": "33px",
                        "backgroundColor": "#27ACB2",
                        "width": "10px"
                      }
                    ],
                    "height": "40px",
                    "backgroundColor": "#EEEEEE",
                    "flex": 1,
                    "alignItems": "center",
                    "justifyContent": "flex-end"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "height": "31px",
                        "backgroundColor": "#27ACB2",
                        "width": "10px"
                      }
                    ],
                    "height": "40px",
                    "backgroundColor": "#EEEEEE",
                    "flex": 1,
                    "alignItems": "center",
                    "justifyContent": "flex-end"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "height": "34px",
                        "backgroundColor": "#27ACB2",
                        "width": "10px"
                      }
                    ],
                    "height": "40px",
                    "backgroundColor": "#EEEEEE",
                    "flex": 1,
                    "alignItems": "center",
                    "justifyContent": "flex-end"
                  }
                ]
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "63kg",
                    "size": "xxs",
                    "color": "#888888",
                    "align": "start"
                  }
                ]
              }
            ]
          },
          {
            "type": "separator",
            "margin": "xl"
          },
          {
            "type": "box",
            "layout": "vertical",
            "contents": [
              {
                "type": "text",
                "text": "カロリー",
                "weight": "bold",
                "size": "md"
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "text",
                        "text": "摂取",
                        "size": "sm",
                        "color": "#555555"
                      },
                      {
                        "type": "text",
                        "text": "1250 kcal",
                        "size": "xl",
                        "color": "#111111",
                        "weight": "bold"
                      },
                      {
                        "type": "text",
                        "text": "目標: 1500 kcal",
                        "size": "xs",
                        "color": "#888888"
                      }
                    ],
                    "flex": 1
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "text",
                        "text": "消費",
                        "size": "sm",
                        "color": "#555555"
                      },
                      {
                        "type": "text",
                        "text": "450 kcal",
                        "size": "xl",
                        "color": "#111111",
                        "weight": "bold"
                      },
                      {
                        "type": "text",
                        "text": "目標: 500 kcal",
                        "size": "xs",
                        "color": "#888888"
                      }
                    ],
                    "flex": 1
                  }
                ]
              }
            ],
            "paddingTop": "10px"
          },
          {
            "type": "text",
            "text": "PFCバランス",
            "weight": "bold",
            "size": "md",
            "margin": "lg"
          },
          {
            "type": "box",
            "layout": "horizontal",
            "margin": "md",
            "contents": [
              {
                "type": "box",
                "layout": "vertical",
                "contents": [
                  {
                    "type": "text",
                    "text": "P(たんぱく質)",
                    "size": "sm",
                    "color": "#555555"
                  },
                  {
                    "type": "text",
                    "text": "38.8g",
                    "size": "md",
                    "color": "#111111",
                    "weight": "bold"
                  },
                  {
                    "type": "text",
                    "text": "目標: 50.0g",
                    "size": "xs",
                    "color": "#888888"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "width": "77%",
                        "height": "6px",
                        "backgroundColor": "#FF6B6E"
                      }
                    ],
                    "backgroundColor": "#EEEEEE",
                    "height": "6px",
                    "margin": "sm"
                  }
                ],
                "flex": 1
              },
              {
                "type": "box",
                "layout": "vertical",
                "contents": [
                  {
                    "type": "text",
                    "text": "F(脂質)",
                    "size": "sm",
                    "color": "#555555"
                  },
                  {
                    "type": "text",
                    "text": "0.6g",
                    "size": "md",
                    "color": "#111111",
                    "weight": "bold"
                  },
                  {
                    "type": "text",
                    "text": "目標: 60.0g",
                    "size": "xs",
                    "color": "#888888"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "width": "1%",
                        "height": "6px",
                        "backgroundColor": "#FFB2C0"
                      }
                    ],
                    "backgroundColor": "#EEEEEE",
                    "height": "6px",
                    "margin": "sm"
                  }
                ],
                "flex": 1
              },
              {
                "type": "box",
                "layout": "vertical",
                "contents": [
                  {
                    "type": "text",
                    "text": "C(炭水化物)",
                    "size": "sm",
                    "color": "#555555"
                  },
                  {
                    "type": "text",
                    "text": "122.1g",
                    "size": "md",
                    "color": "#111111",
                    "weight": "bold"
                  },
                  {
                    "type": "text",
                    "text": "目標: 150.0g",
                    "size": "xs",
                    "color": "#888888"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "width": "81%",
                        "height": "6px",
                        "backgroundColor": "#A4D8D8"
                      }
                    ],
                    "backgroundColor": "#EEEEEE",
                    "height": "6px",
                    "margin": "sm"
                  }
                ],
                "flex": 1
              }
            ]
          },
          {
            "type": "separator",
            "margin": "xl"
          },
          {
            "type": "text",
            "text": "運動記録",
            "weight": "bold",
            "size": "md",
            "margin": "xl"
          },
          {
            "type": "box",
            "layout": "vertical",
            "margin": "md",
            "contents": [
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "ランニング",
                    "size": "sm",
                    "color": "#555555",
                    "flex": 2
                  },
                  {
                    "type": "text",
                    "text": "30分",
                    "size": "sm",
                    "color": "#111111",
                    "align": "end",
                    "flex": 1
                  },
                  {
                    "type": "text",
                    "text": "300 kcal",
                    "size": "sm",
                    "color": "#27ACB2",
                    "align": "end",
                    "flex": 1
                  }
                ]
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "筋トレ",
                    "size": "sm",
                    "color": "#555555",
                    "flex": 2
                  },
                  {
                    "type": "text",
                    "text": "45分",
                    "size": "sm",
                    "color": "#111111",
                    "align": "end",
                    "flex": 1
                  },
                  {
                    "type": "text",
                    "text": "150 kcal",
                    "size": "sm",
                    "color": "#27ACB2",
                    "align": "end",
                    "flex": 1
                  }
                ]
              }
            ]
          }
        ]
      },
      "footer": {
        "type": "box",
        "layout": "vertical",
        "contents": [
          {
            "type": "button",
            "action": {
              "type": "message",
              "label": "詳細を見る",
              "text": "健康データの詳細を見る"
            },
            "style": "primary",
            "color": "#27ACB2"
          }
        ]
      },
      "styles": {
        "header": {
          "backgroundColor": "#27ACB2"
        }
      }
    },
    {
      "type": "bubble",
      "size": "giga",
      "header": {
        "type": "box",
        "layout": "vertical",
        "contents": [
          {
            "type": "text",
            "text": date,
            "weight": "bold",
            "size": "xl",
            "color": "#FFFFFF"
          }
        ],
        "backgroundColor": "#27ACB2",
        "paddingAll": "20px"
      },
      "body": {
        "type": "box",
        "layout": "vertical",
        "contents": [
          {
            "type": "box",
            "layout": "vertical",
            "margin": "xl",
            "contents": [
              {
                "type": "text",
                "text": "体重",
                "weight": "bold",
                "size": "md"
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "text",
                        "text": "現在",
                        "size": "sm",
                        "color": "#555555"
                      },
                      {
                        "type": "text",
                        "text": "66 kg",
                        "size": "xl",
                        "color": "#111111",
                        "weight": "bold"
                      },
                      {
                        "type": "text",
                        "text": "前日比: -1kg",
                        "size": "xs",
                        "color": "#27ACB2"
                      }
                    ],
                    "flex": 1
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "text",
                        "text": "目標",
                        "size": "sm",
                        "color": "#555555"
                      },
                      {
                        "type": "text",
                        "text": "62 kg",
                        "size": "xl",
                        "color": "#111111",
                        "weight": "bold"
                      },
                      {
                        "type": "text",
                        "text": "残り: 4kg",
                        "size": "xs",
                        "color": "#888888"
                      }
                    ],
                    "flex": 1
                  }
                ]
              }
            ]
          },
          {
            "type": "text",
            "text": "体重グラフ (過去7日間)",
            "weight": "bold",
            "size": "md",
            "margin": "lg"
          },
          {
            "type": "box",
            "layout": "vertical",
            "margin": "md",
            "contents": [
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "65kg",
                    "size": "xxs",
                    "color": "#888888",
                    "align": "start"
                  }
                ]
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "height": "35px",
                        "backgroundColor": "#27ACB2",
                        "width": "10px"
                      }
                    ],
                    "height": "40px",
                    "backgroundColor": "#EEEEEE",
                    "flex": 1,
                    "alignItems": "center",
                    "justifyContent": "flex-end"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "height": "30px",
                        "backgroundColor": "#27ACB2",
                        "width": "10px"
                      }
                    ],
                    "height": "40px",
                    "backgroundColor": "#EEEEEE",
                    "flex": 1,
                    "alignItems": "center",
                    "justifyContent": "flex-end"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "height": "32px",
                        "backgroundColor": "#27ACB2",
                        "width": "10px"
                      }
                    ],
                    "height": "40px",
                    "backgroundColor": "#EEEEEE",
                    "flex": 1,
                    "alignItems": "center",
                    "justifyContent": "flex-end"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "height": "28px",
                        "backgroundColor": "#27ACB2",
                        "width": "10px"
                      }
                    ],
                    "height": "40px",
                    "backgroundColor": "#EEEEEE",
                    "flex": 1,
                    "alignItems": "center",
                    "justifyContent": "flex-end"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "height": "33px",
                        "backgroundColor": "#27ACB2",
                        "width": "10px"
                      }
                    ],
                    "height": "40px",
                    "backgroundColor": "#EEEEEE",
                    "flex": 1,
                    "alignItems": "center",
                    "justifyContent": "flex-end"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "height": "31px",
                        "backgroundColor": "#27ACB2",
                        "width": "10px"
                      }
                    ],
                    "height": "40px",
                    "backgroundColor": "#EEEEEE",
                    "flex": 1,
                    "alignItems": "center",
                    "justifyContent": "flex-end"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "height": "34px",
                        "backgroundColor": "#27ACB2",
                        "width": "10px"
                      }
                    ],
                    "height": "40px",
                    "backgroundColor": "#EEEEEE",
                    "flex": 1,
                    "alignItems": "center",
                    "justifyContent": "flex-end"
                  }
                ]
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "63kg",
                    "size": "xxs",
                    "color": "#888888",
                    "align": "start"
                  }
                ]
              }
            ]
          },
          {
            "type": "separator",
            "margin": "xl"
          },
          {
            "type": "box",
            "layout": "vertical",
            "contents": [
              {
                "type": "text",
                "text": "カロリー",
                "weight": "bold",
                "size": "md"
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "text",
                        "text": "摂取",
                        "size": "sm",
                        "color": "#555555"
                      },
                      {
                        "type": "text",
                        "text": "1250 kcal",
                        "size": "xl",
                        "color": "#111111",
                        "weight": "bold"
                      },
                      {
                        "type": "text",
                        "text": "目標: 1500 kcal",
                        "size": "xs",
                        "color": "#888888"
                      }
                    ],
                    "flex": 1
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "text",
                        "text": "消費",
                        "size": "sm",
                        "color": "#555555"
                      },
                      {
                        "type": "text",
                        "text": "450 kcal",
                        "size": "xl",
                        "color": "#111111",
                        "weight": "bold"
                      },
                      {
                        "type": "text",
                        "text": "目標: 500 kcal",
                        "size": "xs",
                        "color": "#888888"
                      }
                    ],
                    "flex": 1
                  }
                ]
              }
            ],
            "paddingTop": "10px"
          },
          {
            "type": "text",
            "text": "PFCバランス",
            "weight": "bold",
            "size": "md",
            "margin": "lg"
          },
          {
            "type": "box",
            "layout": "horizontal",
            "margin": "md",
            "contents": [
              {
                "type": "box",
                "layout": "vertical",
                "contents": [
                  {
                    "type": "text",
                    "text": "P(たんぱく質)",
                    "size": "sm",
                    "color": "#555555"
                  },
                  {
                    "type": "text",
                    "text": "55.0g ⚠️",
                    "size": "md",
                    "color": "#FF0000",
                    "weight": "bold"
                  },
                  {
                    "type": "text",
                    "text": "目標: 50.0g (+5.0g)",
                    "size": "xs",
                    "color": "#FF0000"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "horizontal",
                        "contents": [
                          {
                            "type": "box",
                            "layout": "vertical",
                            "contents": [],
                            "width": "100%",
                            "height": "6px",
                            "backgroundColor": "#FF6B6E"
                          },
                          {
                            "type": "box",
                            "layout": "vertical",
                            "contents": [],
                            "width": "10%",
                            "height": "6px",
                            "backgroundColor": "#FF0000"
                          }
                        ]
                      }
                    ],
                    "backgroundColor": "#EEEEEE",
                    "height": "6px",
                    "margin": "sm"
                  }
                ],
                "flex": 1
              },
              {
                "type": "box",
                "layout": "vertical",
                "contents": [
                  {
                    "type": "text",
                    "text": "F(脂質)",
                    "size": "sm",
                    "color": "#555555"
                  },
                  {
                    "type": "text",
                    "text": "45.2g",
                    "size": "md",
                    "color": "#111111",
                    "weight": "bold"
                  },
                  {
                    "type": "text",
                    "text": "目標: 60.0g",
                    "size": "xs",
                    "color": "#888888"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [],
                        "width": "75%",
                        "height": "6px",
                        "backgroundColor": "#FFB2C0"
                      }
                    ],
                    "backgroundColor": "#EEEEEE",
                    "height": "6px",
                    "margin": "sm"
                  }
                ],
                "flex": 1
              },
              {
                "type": "box",
                "layout": "vertical",
                "contents": [
                  {
                    "type": "text",
                    "text": "C(炭水化物)",
                    "size": "sm",
                    "color": "#555555"
                  },
                  {
                    "type": "text",
                    "text": "160.0g ⚠️",
                    "size": "md",
                    "color": "#FF0000",
                    "weight": "bold"
                  },
                  {
                    "type": "text",
                    "text": "目標: 150.0g (+10.0g)",
                    "size": "xs",
                    "color": "#FF0000"
                  },
                  {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                      {
                        "type": "box",
                        "layout": "horizontal",
                        "contents": [
                          {
                            "type": "box",
                            "layout": "vertical",
                            "contents": [],
                            "width": "100%",
                            "height": "6px",
                            "backgroundColor": "#A4D8D8"
                          },
                          {
                            "type": "box",
                            "layout": "vertical",
                            "contents": [],
                            "width": "6%",
                            "height": "6px",
                            "backgroundColor": "#FF0000"
                          }
                        ]
                      }
                    ],
                    "backgroundColor": "#EEEEEE",
                    "height": "6px",
                    "margin": "sm"
                  }
                ],
                "flex": 1
              }
            ]
          },
          {
            "type": "text",
            "text": "PFCバランスが目標を超えています。バランスの調整を検討しましょう。",
            "size": "xs",
            "color": "#FF0000",
            "margin": "md",
            "wrap": true
          },
          {
            "type": "separator",
            "margin": "xl"
          },
          {
            "type": "text",
            "text": "運動記録",
            "weight": "bold",
            "size": "md",
            "margin": "xl"
          },
          {
            "type": "box",
            "layout": "vertical",
            "margin": "md",
            "contents": [
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "ランニング",
                    "size": "sm",
                    "color": "#555555",
                    "flex": 2
                  },
                  {
                    "type": "text",
                    "text": "30分",
                    "size": "sm",
                    "color": "#111111",
                    "align": "end",
                    "flex": 1
                  },
                  {
                    "type": "text",
                    "text": "300 kcal",
                    "size": "sm",
                    "color": "#27ACB2",
                    "align": "end",
                    "flex": 1
                  }
                ]
              },
              {
                "type": "box",
                "layout": "horizontal",
                "contents": [
                  {
                    "type": "text",
                    "text": "筋トレ",
                    "size": "sm",
                    "color": "#555555",
                    "flex": 2
                  },
                  {
                    "type": "text",
                    "text": "45分",
                    "size": "sm",
                    "color": "#111111",
                    "align": "end",
                    "flex": 1
                  },
                  {
                    "type": "text",
                    "text": "150 kcal",
                    "size": "sm",
                    "color": "#27ACB2",
                    "align": "end",
                    "flex": 1
                  }
                ]
              }
            ]
          }
        ]
      },
      "footer": {
        "type": "box",
        "layout": "vertical",
        "contents": [
          {
            "type": "button",
            "action": {
              "type": "message",
              "label": "詳細を見る",
              "text": "健康データの詳細を見る"
            },
            "style": "primary",
            "color": "#27ACB2"
          }
        ]
      },
      "styles": {
        "header": {
          "backgroundColor": "#27ACB2"
        }
      }
    }
  ]
}
            };

            liff.sendMessages([flexMessage])
                .then(() => {
                    console.log('Message sent');
                    liff.closeWindow();
                })
                .catch((error) => {
                    console.error('Error sending message:', error);
                });
        }

        window.onload = initializeLiff;
    </script>
</body>
</html>
